<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health & Fitness Assistant</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f9ff;
        }
        .container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            color: #0066cc;
        }
        textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
            font-family: inherit;
        }
        button {
            padding: 12px 20px;
            background-color: #0066cc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #0055aa;
        }
        #response {
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 15px;
            min-height: 200px;
            white-space: pre-wrap;
            background-color: #f9f9f9;
            line-height: 1.5;
        }
        .loading {
            opacity: 0.5;
        }
        .disclaimer {
            font-size: 0.8rem;
            color: #666;
            text-align: center;
            margin-top: 20px;
        }
        .examples {
            background-color: #f0f7ff;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        .examples h4 {
            margin-top: 0;
            color: #0066cc;
        }
        .examples ul {
            margin-bottom: 0;
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Health & Fitness Assistant</h1>
            <p>Your AI guide for health, nutrition, and fitness information</p>
        </div>
        
        <div class="examples">
            <h4>You can ask about:</h4>
            <ul>
                <li>Health conditions and preventive measures</li>
                <li>Nutrition advice and balanced diet plans</li>
                <li>Workout routines for different fitness levels</li>
                <li>Training plans for running, swimming, cycling, or triathlons</li>
                <li>Recovery strategies and injury prevention</li>
                <li>Mental health and wellness practices</li>
                <li>Sleep optimization techniques</li>
                <li>Supplement information and recommendations</li>
            </ul>
        </div>
        
        <div>
            <h3>What would you like to know?</h3>
            <textarea id="prompt" placeholder="Example: Can you suggest a 12-week half marathon training plan for beginners?"></textarea>
        </div>
        
        <div>
            <button id="submit">Get Answer</button>
        </div>
        
        <div>
            <h3>Response:</h3>
            <div id="response">Your health and fitness information will appear here...</div>
        </div>
        
        <div class="disclaimer">
            Note: This AI assistant provides general information based on health and fitness research but does not provide medical advice. 
            Always consult with healthcare professionals for medical concerns and certified trainers for personalized fitness programs.
        </div>
    </div>

    <script>
        document.getElementById('submit').addEventListener('click', async () => {
            const promptText = document.getElementById('prompt').value.trim();
            const responseElement = document.getElementById('response');
            
            if (!promptText) {
                responseElement.textContent = "Please enter a question first.";
                return;
            }
            
            // Show loading state
            responseElement.textContent = "Analyzing your health and fitness question...";
            responseElement.classList.add('loading');
            document.getElementById('submit').disabled = true;
            
            try {
                const response = await fetch('https://dduwontuog.execute-api.us-west-2.amazonaws.com/prod/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        prompt: promptText
                    }),
                    mode: 'cors'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                
                const data = await response.json();
                
                // Display the response
                if (data.response) {
                    responseElement.textContent = data.response;
                    
                    // Show note if response is from fallback model
                    if (data.note) {
                        responseElement.textContent += "\n\n" + data.note;
                    }
                } else if (data.error) {
                    responseElement.textContent = `Error: ${data.error}`;
                } else {
                    responseElement.textContent = "Received an unexpected response format.";
                }
            } catch (error) {
                console.error("Error details:", error);
                responseElement.textContent = `Error: ${error.message}. Check browser console for details.`;
            } finally {
                // Remove loading state
                responseElement.classList.remove('loading');
                document.getElementById('submit').disabled = false;
            }
        });
    </script>
</body>
</html>